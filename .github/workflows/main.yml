on:
  push:
    branches: [ main ]
name: ðŸš€ Deploy website on push
jobs:
  web-deploy:
    name: ðŸŽ‰ Auto Deploy
    runs-on: ubuntu-latest
    steps:
    - name: ðŸšš Get latest code
      uses: actions/checkout@v3
      
    - name: Setup Rsync
      uses: GuillaumeFalourd/setup-rsync@main
    - run: rsync --version
    
    - name: rsync deployments
      uses: contention/rsync-deployments@v1.0.0
        workflow "All pushes" {
        on = "push"
        resolves = ["Deploy to Staging"]
      }

      action "Deploy to Staging" {
        uses = "contention/action-rsync-deploy@master"
        secrets = ${{ secrets.DEPLOY_KEY }}
        args = ["-avzr --delete", "--exclude .htaccess --exclude /uploads/", "uiixb8hw@194.233.77.193:/home/uiixb8hw/public_html/"]
      } 
        
   
